#PBS -l walltime=5:00:00
#PBS -l select=1:ncpus=1:mem=20gb
#PBS -N definition
#PBS -q med-bio

cd /rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/outcome_definition/Scripts
module load anaconda3/personal

def_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/outcome_definition/Definitions/diabetes/
app_data_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/ukb26390.csv
hes_main_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/hesin.txt
hes_diag_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/hesin_diag.txt
hes_oper_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/hesin_oper.txt
death_main_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/death.txt
death_cause_path=/rds/general/project/chadeau_ukbb_folder/live/data/project_data/UK_Biobank_diabetes/Data/death_cause.txt

mkdir ../Outputs

Rscript extract_hes.R $def_path $app_data_path $hes_main_path $hes_diag_path $hes_oper_path

Rscript extract_death.R $def_path $app_data_path $death_main_path $death_cause_path

Rscript extract_baseline.R $def_path $app_data_path
